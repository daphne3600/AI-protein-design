{"cells":[{"cell_type":"markdown","source":["# Efficient evolution with protein language models\n","\n","Original notebook: https://github.com/brianhie/efficient-evolution\n","\n","Paper: \"[Efficient evolution of human antibodies from general protein language models](https://www.nature.com/articles/s41587-023-01763-2)\""],"metadata":{"id":"CPoYbXuS2-qf"}},{"cell_type":"markdown","source":["# Running protocols on the command-line\n","\n","Some protocols that apply pLMs do so by packaging the interface in a script executed with python. The Efficient Evolution pipeline is one such protocol.\n","\n","Here, we will install the necessary modules into our Colab environment, then run the protocol in bash."],"metadata":{"id":"eMQvItGjl-5f"}},{"cell_type":"markdown","source":["# Comparing re-design of TEV protease from the 2024 Winter RosettaCon Redesign Competition\n","\n","At Winter RosettaCon in 2024, LiberumBio and Rosetta Commons sponsored a [protein design competition](https://liberumbio.com/PDG24.htm). **Team 6** [won the competition](https://rosettacommons.org/2024/04/19/announcing-the-winners-of-the-winter-protein-design-games-2024-unleashing-innovation-in-enzyme-engineering/). Their results are outlined [here](https://liberumbio.com/Methods/Team_6.html) and [a talk outlining their strategy](https://www.dropbox.com/scl/fi/hsqcn1fythfxlgn5x800i/Samuel-Garfinkle-1A.mp4?rlkey=68cpjbmli64142jmi25zc032p&e=1&st=9cru6cmy&dl=0) was given at SRC 2024.\n","\n","\n","\n","```\n",">TEV protease\n","MGESLFKGPRDYNPISSTICHLTNESDGHTTSLYGIGFGPFIITNKHLFRRNNGTLLVQSLHGVFKVKNTTTLQQHLIDGRDMIIIRMPKDFPPFPQKLKFREPQREERICLVTTNFQTKSMSSMVSDTSCTFPSSDGIFWKHWIQTKDGQCGSPLVSTRDGFIVGIHSASNFTNTNNYFTSVPKNFMELLTNQEAQQWVSGWRLNADSVLWGGHKVFMSKPEEPFQPVKEATQLMN\n","```\n","\n","Compare the results of Efficient Evolution to the designs from the winning team:\n","\n","- Design 1: S10I/P15Q/S38T/T180A/S226R/A238V, T24S/L63V/N75D/I84V/E113G/S142G.\n","- Design 2: Mutations from Design 1 in addition to R226V, I145T, S160N, T187A, C26V, F44Y, F47Y, V64I, V70T, F71Y, V73I, M89L, M94L, I116V, I173L, V189I.\n","- Design 3: Mutations from Design 1 in addition to F179A, F224A, K227S\n","- Design 4: Mutations from Design 1 in addition to C-terminus truncation at P228"],"metadata":{"id":"5q3MYN42okev"}},{"cell_type":"code","execution_count":1,"metadata":{"id":"WWTU5XRnIDzL","executionInfo":{"status":"ok","timestamp":1762612177762,"user_tz":0,"elapsed":9392,"user":{"displayName":"Sophia","userId":"12215712277586225497"}}},"outputs":[],"source":["#@title Install dependencies\n","\n","!pip install fair-esm==0.4.0 biopython > pip_install.log 2>&1\n","!git clone https://github.com/brianhie/efficient-evolution.git > git_clone.log 2>&1\n"]},{"cell_type":"code","source":["wildtype_sequence = 'MGESLFKGPRDYNPISSTICHLTNESDGHTTSLYGIGFGPFIITNKHLFRRNNGTLLVQSLHGVFKVKNTTTLQQHLIDGRDMIIIRMPKDFPPFPQKLKFREPQREERICLVTTNFQTKSMSSMVSDTSCTFPSSDGIFWKHWIQTKDGQCGSPLVSTRDGFIVGIHSASNFTNTNNYFTSVPKNFMELLTNQEAQQWVSGWRLNADSVLWGGHKVFMSKPEEPFQPVKEATQLMN' #@param {type:\"string\"}\n","\n","!python efficient-evolution/bin/recommend.py --model-name=esm1b $wildtype_sequence"],"metadata":{"id":"rRqGI65bZe_A","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1762612277163,"user_tz":0,"elapsed":88412,"user":{"displayName":"Sophia","userId":"12215712277586225497"}},"outputId":"d9dc2b08-5caa-42e2-b6c2-135e41693abf"},"execution_count":2,"outputs":[{"output_type":"stream","name":"stdout","text":["Downloading: \"https://dl.fbaipublicfiles.com/fair-esm/models/esm1b_t33_650M_UR50S.pt\" to /root/.cache/torch/hub/checkpoints/esm1b_t33_650M_UR50S.pt\n","Downloading: \"https://dl.fbaipublicfiles.com/fair-esm/regression/esm1b_t33_650M_UR50S-contact-regression.pt\" to /root/.cache/torch/hub/checkpoints/esm1b_t33_650M_UR50S-contact-regression.pt\n","P40T\t1\n","K46A\t1\n","C131V\t1\n","Q146S\t1\n"]}]},{"cell_type":"code","source":[],"metadata":{"id":"-A09WLKKSTO6"},"execution_count":null,"outputs":[]}],"metadata":{"accelerator":"GPU","colab":{"provenance":[{"file_id":"18QLOmi5yNb1i9wztAzv981Wgk2E4IP4q","timestamp":1753997436688}]},"gpuClass":"standard","kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}